<div class="pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">Add Seller</h1>
</div>

<!-- Seller form -->
<form
  class="flex-col justify-content-around"
  [formGroup]="sellerForm"
  (ngSubmit)="submitSellerData()"
  novalidate
>
  <div class="grid-2-col">
    <div>
      <label>Name</label>
      <input type="text" formControlName="name" class="form-control" required />
      <!-- Showing errors using getter method -->
      <p *ngIf="name.touched && name.invalid" class="error">
        <sup>*</sup>Please enter atleast name
      </p>
      <p *ngIf="name.errors?.minlength" class="error">
        <sup>*</sup>Name shouldn't be less than 2 words
      </p>
    </div>

    <div>
      <label>Mobile number</label>
      <input
        type="text"
        formControlName="mobileNumber"
        class="form-control"
        required
      />
      <!-- Showing errors using getter method -->
      <p *ngIf="mobileNumber.touched && mobileNumber.invalid" class="error">
        <sup>*</sup>Please provide number
      </p>
      <p *ngIf="mobileNumber.errors?.pattern" class="error">
        <sup>*</sup>Use numbers only number
      </p>
    </div>
  </div>

  <div formArrayName="products">
    <table
      class="table table-bordered table-responsive-sm table-responsive-md table-responsive-lg"
    >
      <thead>
        <tr>
          <th scope="col"><label>Product Name</label></th>
          <th scope="col"><label>Category</label></th>
          <th scope="col"><label>Quantity</label></th>
          <!-- <th scope="col"><label>Balance</label></th> -->
          <th scope="col"><label>Selling Price</label></th>
          <th scope="col"><label>Buying price</label></th>
          <th scope="col"><label>Action</label></th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let product of productsForms.controls; let i = index"
          [formGroupName]="i"
        >
          <td>
            <input
              type="text"
              formControlName="productName"
              class="form-control"
              required
            />
            <!-- Showing errors using getter method -->
            <p
              *ngIf="
                productsForms.controls[i].controls.productName.touched &&
                productsForms.controls[i].controls.productName.invalid
              "
              class="error"
            >
              <sup>*</sup>Please enter atleast product product name
            </p>
            <p
              *ngIf="
                productsForms.controls[i].controls.productName.errors?.minlength
              "
              class="error"
            >
              <sup>*</sup>Name shouldn't be less than 2 words
            </p>
          </td>

          <td>
            <input
              type="text"
              formControlName="category"
              class="form-control"
              required
            />
            <!-- Showing errors using getter method -->
            <p
              *ngIf="
                productsForms.controls[i].controls.category.touched &&
                productsForms.controls[i].controls.category.invalid
              "
              class="error"
            >
              <sup>*</sup>Please enter atleast product category
            </p>
            <p
              *ngIf="
                productsForms.controls[i].controls.category.errors?.minlength
              "
              class="error"
            >
              <sup>*</sup>Name shouldn't be less than 2 words
            </p>
          </td>

          <td>
            <input
              type="text"
              formControlName="quantity"
              class="form-control"
              required
            />
            <!-- Showing errors using getter method -->
            <p
              *ngIf="
                productsForms.controls[i].controls.quantity.touched &&
                productsForms.controls[i].controls.quantity.invalid
              "
              class="error"
            >
              <sup>*</sup>Please provide number
            </p>
            <p
              *ngIf="
                productsForms.controls[i].controls.quantity.errors?.pattern
              "
              class="error"
            >
              <sup>*</sup>Use numbers only number
            </p>
          </td>

          <!-- <td>
            <input
              type="text"
              formControlName="balance"
              class="form-control"
              disabled
              required
            />
            <p
              *ngIf="
                productsForms.controls[i].controls.balance.touched &&
                productsForms.controls[i].controls.balance.invalid
              "
              class="error"
            >
              <sup>*</sup>Please provide number
            </p>
            <p
              *ngIf="productsForms.controls[i].controls.balance.errors?.pattern"
              class="error"
            >
              <sup>*</sup>Use numbers only number
            </p>
          </td> -->

          <td>
            <input
              type="text"
              formControlName="sellingPrice"
              class="form-control"
              required
            />
            <!-- Showing errors using getter method -->
            <p
              *ngIf="
                productsForms.controls[i].controls.sellingPrice.touched &&
                productsForms.controls[i].controls.sellingPrice.invalid
              "
              class="error"
            >
              <sup>*</sup>Please provide number
            </p>
            <p
              *ngIf="
                productsForms.controls[i].controls.sellingPrice.errors?.pattern
              "
              class="error"
            >
              <sup>*</sup>Use numbers only number
            </p>
          </td>
          <td>
            <input
              type="text"
              formControlName="buyingPrice"
              class="form-control"
              required
            />
            <!-- Showing errors using getter method -->
            <p
              *ngIf="
                productsForms.controls[i].controls.buyingPrice.touched &&
                productsForms.controls[i].controls.buyingPrice.invalid
              "
              class="error"
            >
              <sup>*</sup>Please provide number
            </p>
            <p
              *ngIf="
                productsForms.controls[i].controls.buyingPrice.errors?.pattern
              "
              class="error"
            >
              <sup>*</sup>Use numbers only number
            </p>
          </td>
          <td>
            <button
              type="button"
              class="btn btn-danger gap-right"
              (click)="deleteProduct(i)"
            >
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div>
    <div class="form-group text-right">
      <button
        type="button"
        class="btn btn-secondary gap-right"
        (click)="addProduct()"
      >
        <i class="fas fa-plus"></i>
        <i class="fa fa-shopping-cart" aria-hidden="true"></i>
      </button>

      <button
        type="button"
        class="btn btn-secondary gap-right"
        (click)="ResetForm()"
      >
        Reset
      </button>
      <button
        type="submit"
        class="btn btn-success"
        [disabled]="!sellerForm.valid"
      >
      <i class="fa fa-floppy-o" aria-hidden="true"></i>
      Add
      </button>
    </div>
  </div>
</form>
<!-- Seller form ends-->
